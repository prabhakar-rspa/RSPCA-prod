<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>ia_crm__Bulk_update</fullName>
    <availability>online</availability>
    <description>This button can be used in classic interface only, it contains item selection from Opportunity page.</description>
    <displayType>massActionButton</displayType>
    <linkType>javascript</linkType>
    <masterLabel>Bulk update</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <requireRowSelection>true</requireRowSelection>
    <url>var ids = {!GETRECORDIDS($ObjectType.OpportunityLineItem)}; 

var url = &#39;{!URLFOR($Site.Prefix)}/apex/ia_crm__OpportunityProductsBulkUpdate?recordId={!Opportunity.Id}&amp;recordType={!Opportunity.RecordTypeId}&amp;hasOpportunityLine={!if(Opportunity.HasOpportunityLineItem,&#39;true&#39;,&#39;false&#39;)}&#39;;   

var isValid = true;
if (ids.length) { 
if (ids.length &lt;= 50) { 
url += &#39;&amp;oproductIds=&#39; + ids.join(&#39;,&#39;); 
} else { 
alert(&#39;You have selected more than 50 items, please select less items.&#39;); 
isValid=false;
} 
}
if(isValid) {
window.location = url;
}</url>
</WebLink>
